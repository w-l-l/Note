# git底层概念

## 基础的 linux 命令

`git` 窗口实际输入的就是 `linux` 命令。

- `clear`：清除命令窗口的信息。

- `echo 'xxx'`：往控制台输出信息。

- `echo 'xxx' > fileName`：输出内容到文件并创建。

- `ll`：将当前文件下的子文件和子目录平铺在控制台。

- `find directoryName`：将对应目录下的子孙文件和子孙目录平铺在控制台。

- `find directoryName -type f`：将对应目录下的文件平铺在控制台。

- `rm fileName`：删除文件。

- `mv 源文件 重命名文件`：重命名。

- `cat 文件的url`：查看对应文件的内容。

- `vim 文件的url（在英文环境下）`：  
按 `i` 进入插入模式，进行文件的编辑。  
按 `esc` 键&按 `:` 键，进行命令的执行：  
&emsp;&emsp;`q!` --> 强制退出（不保存）。  
&emsp;&emsp;`wq` --> 保存退出。  
&emsp;&emsp;`set nu` --> 设置行号。

## .git 目录

通过 `git init` 初始化会生成 `.git` 隐藏目录，该目录包含以下信息：

- `hooks`：目录包含客户端或服务端的钩子脚本。

- `info`：包含一个全局性排除文件。

- `logs`：保存日志信息。

- `objects`：目录存储所有的数据内容。

- `refs`：目录存储指向数据的提交对象的指针（分支）。

- `config`：文件包含项目特有的配置选项。

- `description`：用来显示对仓库的描述信息。

- `HEAD`：文件指示目前被检出的分支。

- `index`：文件保存暂存区信息。

## git 对象（blob）

`git` 的核心部分是一个简单的键值对数据库。

你可以向该数据库插入任意类型的内容，它会返回一个键值，通过该键值可以在任意时刻再次检索该内容。

****

向数据库写入内容，并返回对应键值：

```bash
echo 'xxx' | git hash-object -w --stdin
# -w：选项提示 hash-object 命令存储数据对象，若不指定此选项，则该命令仅返回对应的键值
# --stdin(standard input)：选项则指示该命令从标准输入读取内容，若不指定此选项，则需在命令尾部给出待存储文件的路径
```

```bash
git hash-object -w filePath
# 存文件
```

```bash
git hash-object filePath
# 返回对应文件的键值
# 长度为 40 的校验和（SHA-1 哈希值）
```

****

查看 `git` 是如何存储数据的：

```bash
find .git/objects -type f
# 返回 .git/objects/xx/xxx...(38位)
```

这就是开始时 `git` 存储内容的方式：一个文件对应一条内容，校验和的前两个字符用于命名子目录，余下的 38 个字符则用作文件名。

****

根据键值拉取数据：

```bash
git cat-file -p 校验和
# -p：此选项可指示该命令自动判断内容的类型，并为我们显示格式友好的内容
# 返回对应文件的内容
```

```bash
git cat-file -t 校验和
# 返回其内部存储的任何对象类型
```

****

问题：

- 记住文件每一个版本所对应的 `SHA-1` 值并不现实。

- 在 `git` 中，文件名并没有被保存，我们仅保存了文件的内容。

解决方案：树对象。

**注意：当前的操作都是在对本地数据库进行操作，不涉及暂存区。**
